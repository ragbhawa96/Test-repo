
package com.pentest4vaadin.demo.views;

import com.vaadin.flow.component.dialog.Dialog;
import com.vaadin.flow.component.html.NativeButton;
import com.vaadin.flow.component.orderedlayout.HorizontalLayout;
import com.vaadin.flow.component.orderedlayout.VerticalLayout;
import com.vaadin.flow.component.textfield.TextField;
import com.vaadin.flow.router.Route;
import org.springframework.beans.factory.annotation.Autowired;
import com.pentest4vaadin.demo.presenter.HtmlElementsPresenter;

/**
 * Dialog that adds a new HTML mapping.
 */
@Route(value = "addElement", layout = HtmlElementsView.class)
public class AddElementDialog extends Dialog {
    @Autowired
    private HtmlElementsPresenter presenter;

    public AddElementDialog() {
        this.setCloseOnEsc(false);
        this.setCloseOnOutsideClick(false);

        VerticalLayout verLayout = new VerticalLayout();

        TextField tfHtmlTag = new TextField("HTML Tag");
        TextField tfNativeHtml = new TextField("Native HTML Element");
        TextField tfDefaultValue = new TextField("Default Value");

        HorizontalLayout horLayout = new HorizontalLayout();
        NativeButton btnAdd = new NativeButton("Add", e -> {
            presenter.addHtmlMapping(tfHtmlTag.getValue(), tfNativeHtml.getValue(), tfDefaultValue.getValue());

            // Clear input fields.
            tfHtmlTag.clear();
            tfNativeHtml.clear();
            tfDefaultValue.clear();
            this.close();
        });
        NativeButton btnCancel = new NativeButton("Cancel", e-> {
           this.close();
        });
        horLayout.add(btnAdd, btnCancel);

        verLayout.add(tfHtmlTag, tfNativeHtml, tfDefaultValue, horLayout);
        this.add(verLayout);
    }
}
